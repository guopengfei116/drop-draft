<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>jQuer Ajax 全局事件</title>
	<link rel="stylesheet" href="./nprogress/nprogress.css">
	<style>
		body {
			margin: 0;
			padding: 0;
			background-color: #F7F7F7;
		}

		table {
			width: 900px;
			border: 1px solid #CCC;
			border-collapse:collapse;
			margin: 50px auto;
		}

		caption {
			font-size: 24px;
			margin-bottom: 10px;
		}

		td, th {
			height: 40px;
			text-align: center;
			border: 1px solid #CCC;
		}

		button {
			display: block;
			margin: 10px auto;
		}

		.loading {
			display: none;
		}

	</style>
</head>
<body>
	<table>
		<caption>jQuery Ajax 全局事件</caption>
		<tr>
			<th>操作</th>
			<th>ajaxStart</th>
			<th>ajaxSend</th>
			<th>ajaxSuccess</th>
			<th>ajaxError</th>
			<th>ajaxComplete</th>
			<th>ajaxStop</th>
			<th>Loading状态</th>
		</tr>
		<tr>
			<td>
				<button class="btn1">点此获取</button>
				<button class="btn2">点此获取</button>
			</td>
			<td><span class="start">被执行了...</span></td>
			<td><span class="send">被执行了...</span></td>
			<td><span class="success">被执行了...</span></td>
			<td><span class="error">被执行了...</span></td>
			<td><span class="complete">被执行了...</span></td>
			<td><span class="stop">被执行了...</span></td>
			<td style="background-color: #C1E2B3;"><img class="loading" src="./images/loading.gif" alt=""></td>
		</tr>
	</table>
	<script src="./nprogress/nprogress.js"></script>
	<script src="./jquery/jquery.min.js"></script>
	<script>

		$(document).on('click', function () {
			$.ajax({
				url: '01.php'
			});
		});

		$(document).on('click', function () {
			$.ajax({
				url: '02.php'
			});
		});

		// 上述6个事件可以绑定给任一DOM元素
		$(document).on('ajaxStart', function () {
			console.log('start');
			$('.start').css('color', 'red');
		});

		$(document).on('ajaxSend', function () {
			console.log('send');
			$('.send').css('color', 'red');
		});

		$(document).on('ajaxSuccess', function () {
			console.log('success');
			$('.success').css('color', 'red');
		});

		$(document).on('ajaxError', function () {
			console.log('error');
			$('.error').css('color', 'red');
		});

		// 页面里全部Ajax都结束
		$(document).on('ajaxStop', function () {
			console.log('stop');
			$('.stop').css('color', 'red');
		});

		// 单一Ajax请求完成
		$(document).on('ajaxComplete', function () {
			console.log('complete');
			$('.complete').css('color', 'red');
		});

		$(document).ajaxStart(function () {
			NProgress.start();
			$('.loading').show();
		});

		$(document).ajaxStop(function () {
			NProgress.done();
			$('.loading').hide();
		});
	</script>
</body>
</html>