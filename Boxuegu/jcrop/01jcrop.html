<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="Jcrop-WIP-2.x/css/Jcrop.css"/>
		<style>
			.jcrop-thumb {
			  top: 15px;
			  right: -20px;
			  border: 1px black solid;
			}
		</style>
	</head>
	<body>
		<div id="jcrop" style="width: 400px; height: 400px;">
			<img style="width: 100%; height: 100%;" />
		</div>
		<ul>
			<li>111</li>
			<li>2222</li>
			<li>3333</li>
			<li>44444</li>
		</ul>
		<script src="jquery/jquery.js"></script>
		<script src="Jcrop-WIP-2.x/js/Jcrop.js"></script>
		
		<script>
			var jcropApi = null;
			
			$('img').Jcrop({
				aspectRatio: 3,
				bgColor: 'black',
				bgOpacity: 0.8,
				maxSize: [400, 400],
//				canDrag: false,  // 是否可以拖拽
//				canSelect: false, // 是否可以选取区域，false的话也不能拖拽
//				canResize: false, // 选取后，是否可以修改大小
//				canDelete: false,
//				edge:  {n:10,s:20,e:30,w:40}, // 设置可选区域范围到边缘的距离
//				boxHeight: 400,　　//　限制插件最大高度
//				borders:　[20, 40, 60, 80],
//				dragbars: [20, 40, 60, 80], // 设置拖拽时四边值的变化程度，
//				setSelect:　[30, 30, 100, 100], // 设置默认选区
			}, function() {
				
				// 成功回调
				console.log((jcropApi = this));
//				this.setSelect([30, 30, 100, 100]);
//				this.animateTo([30, 30, 100, 100]);
			});
			
			// 获取的实例是同一个
//			console.log($('img').Jcrop('api') === jcropApi);
			
			// 方法调用
//			jcropApi.setSelect([30, 30, 100, 100]);
//			console.log(jcropApi.getSelection())
			
			// 事件绑定，必须绑定给图片的父盒子
			$('#jcrop').on('cropstart', function($e, selection, selectedResult) {
				console.log('start', selectedResult);
			});
			// 事件绑定，必须绑定给图片的父盒子
			$('#jcrop').on('cropend', function($e, selection, selectedResult) {
				console.log('end', selectedResult);
			});
			// 事件绑定，必须绑定给图片的父盒子
			$('#jcrop').on('cropmove', function($e, selection, selectedResult) {
				console.log('move', selectedResult);
			});
			
			// 创建一个缩略图组件
			/*var th = jcropApi.initComponent('Thumbnailer', { width: 130, height: 130 })
			th.resize(100, 100);
			console.log(th);*/
		</script>
		
		<script type="text/javascript">
			setTimeout(function() {
				$('img').attr('src', 'img/002.jpg');
			}, 1000);
		</script>
	</body>
</html>
