<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <script>
        // 什么是闭包？
        /*
        * 闭包就是引用了外部变量的函数。
        * */

        var a = 1;

        // 是闭包,但是没有价值，因为这个闭包内引用的是全局变量，
        // 而全局变量在任何地方都可以使用。
        // 所以这个闭包在闭包界没有用处(在函数界还有有的)
        function fn() {
            console.log(a);
        }
        fn();

        // 不是闭包
        function fn1() {
            var a = 2;
            console.log(a);
        }

        console.log(a);

        /*
        * 什么是有用的闭包？
        * 有用的闭包内部引用的是这个闭包外的局部变量。
        * */

        function fn2() {
            var a = 10;

            // 是闭包,有价值的闭包，因为局部变量不是任何地方都可以访问的。
            function fn3() {
                console.log(a);
            }

            return fn3;
        }

        var fn4 = fn2();
        fn4();

        /*
        * 如何利用有价值的闭包呢？
        * 得通过fn3在外界获取fn2的内部信息。
        * 可以把闭包return 出去，这样在外界就可以通过闭包访问本无法访问到的局部变量了。
        *
        * 闭包的应用主要是配合局部变量，这利用了闭包可以访问外部变量的特性。
        *
        * 闭包就是引用外部变量的函数，也就是说任何函数都可以成为闭包，关键就在于有没有引用外部变量；
        * 只引用了全局变量的闭包，在闭包界没有利用价值；
        * 只有引用了局部变量的闭包，才有利用价值；
        * 因为有利用价值的闭包，引用的都是外部的局部变量，所以这些闭包都是嵌套函数。
        * */

    </script>
</body>
</html>